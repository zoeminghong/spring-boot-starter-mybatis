= Spring-Boot-Starter-Mybatis

image::https://img.shields.io/travis/zoeminghong/spring-boot-starter-mybatis.svg[link="https://travis-ci.org/zoeminghong/spring-boot-starter-mybatis"]
image::https://img.shields.io/github/release/zoeminghong/spring-boot-starter-mybatis.svg[link="https://travis-ci.org/zoeminghong/spring-boot-starter-mybatis"]
image::https://img.shields.io/badge/language-java-green.svg[link="https://travis-ci.org/zoeminghong/spring-boot-starter-mybatis"]


基于Spring Boot和Mybatis，添加分页相关功能，免配置即可用

== 依赖

spring boot:1.5.6

mybatis-spring-boot-starter:1.3.1

cluster-common:1.2.2-RC

== 快速开始

.添加依赖
[source,xml]
----
<dependency>
    <groupId>com.zerostech</groupId>
    <artifactId>spring-boot-starter-mybatis</artifactId>
    <version>${lastest.version}</version>
</dependency>
----

.JDBC配置

[source,yaml]
----
spring:
  datasource:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:mem:test
    schema: classpath:db/schema.sql
    data: classpath:db/data.sql    
----

.MyBatis配置

[source,yaml]
----
mybatis:
    type-aliases-package: com.zeros.demo.model
    type-handlers-package: com.zerso.demo.typehandler
    configuration:
        map-underscore-to-camel-case: true
        default-fetch-size: 100
        default-statement-timeout: 30
----

.服务
[source,java]
----
@Mapper
public interface RoleDao {

    @Select("SELECT * FROM t_role WHERE id = #{id}")
    Role findById(@Param("id") int id);

    @Select("SELECT * FROM t_role")
    List<Role> fetchRoles();
}
----

[source,java]
----
@GetMapping
public Resp<Page<Role>> fetchRoles() {           
  MybatisPageContext.setPageRequest(new MybatisPageContext.PageRequest(1, 2));
  roleDao.fetchRoles();
  Page<Role> roleResponsePage = MybatisPageContext.getPage();
  MybatisPageContext.clearAll();
  return Resp.success(roleResponsePage);
}
----

== 演示

项目目录 `example/mybatis-demo`

== 参考

http://www.mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/[Mybatis]

http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/[Spring Boot Reference]